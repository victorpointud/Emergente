<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MLP â€“ Multilayer Perceptron</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="../styles/ml_style.css" />
</head>
<body>
  <header class="container">
    <h1>Multilayer Perceptron</h1>
    <p class="subtitle">Create or load an MLP, train with backprop, evaluate, continue training, and save</p>
  </header>

  <main class="container">
    <section class="card">
      <h2>1. Create or load network</h2>

      <h3>1.1 Create new</h3>
      <div class="grid">
        <div class="field">
          <label for="nIn">Inputs</label>
          <input id="nIn" type="number" value="3" />
        </div>
        <div class="field">
          <label for="nOut">Outputs</label>
          <input id="nOut" type="number" value="2" />
        </div>
      </div>
      <div class="grid">
        <div class="field">
          <label for="nHidden">Hidden layers</label>
          <input id="nHidden" type="number" value="1" />
        </div>
        <div class="field">
          <label for="hiddenNeurons">Neurons per hidden (single number or list like 4,5)</label>
          <input id="hiddenNeurons" type="text" value="4" />
        </div>
      </div>
      <div class="grid">
        <div class="field">
          <label for="actHidden">Hidden activation</label>
          <select id="actHidden">
            <option value="sigmoid">Sigmoid</option>
            <option value="tanh">Tanh</option>
            <option value="relu" selected>ReLU</option>
          </select>
        </div>
        <div class="field">
          <label for="actOut">Output activation</label>
          <select id="actOut">
            <option value="sigmoid">Sigmoid</option>
            <option value="softmax" selected>Softmax</option>
            <option value="tanh">Tanh</option>
            <option value="relu">ReLU</option>
          </select>
        </div>
      </div>

      <button id="btnCreate" class="btn">Create network</button>
      <div id="createPreview" class="preview"></div>

      <h3>1.2 Load from JSON</h3>
      <div class="grid">
        <div class="field">
          <label for="fileMLP">Configuration file (.json)</label>
          <input id="fileMLP" type="file" accept=".json" />
        </div>
        <div class="field">
          <label>&nbsp;</label>
          <button id="btnApplyMLP" class="btn max">Apply configuration</button>
        </div>
      </div>
      <div id="mlpPreview" class="preview"></div>
    </section>

    <section class="card">
      <h2>2. Train</h2>

      <div class="grid">
        <div class="field">
          <label for="fileXtr">Train X (.csv) or combined Train (.csv)</label>
          <input id="fileXtr" type="file" accept=".csv" />
        </div>
        <div class="field">
          <label for="fileYtr">Train Y (.csv, optional if combined)</label>
          <input id="fileYtr" type="file" accept=".csv" />
        </div>
      </div>

      <div class="grid">
        <div class="field">
          <label for="fileXte">Test X (.csv) or combined Test (.csv)</label>
          <input id="fileXte" type="file" accept=".csv" />
        </div>
        <div class="field">
          <label for="fileYte">Test Y (.csv, optional if combined)</label>
          <input id="fileYte" type="file" accept=".csv" />
        </div>
      </div>

      <div class="grid">
        <div class="field">
          <label for="epochs">Epochs</label>
          <input id="epochs" type="number" value="20" />
        </div>
        <div class="field">
          <label for="lr">Learning rate</label>
          <input id="lr" type="number" step="0.001" value="0.1" />
        </div>
      </div>

      <div class="actions">
        <button id="btnTrain" class="btn">Train</button>
        <button id="btnContinue" class="btn btn-secondary">Continue training</button>
        <button id="btnSave" class="btn btn-secondary">Save network</button>
      </div>

      <div id="trainLog" class="preview table-wrap"></div>
    </section>

    <section class="card">
    <h2>3. Visualizations & Graphs</h2>
    <p class="subtitle">View training and testing visualizations as required by the assignment</p>

    <div class="actions" style="justify-content:center;">
      <button id="btnPlotTrain" class="btn">View TRAIN Graphs</button>
      <button id="btnPlotTest" class="btn">View TEST Graphs</button>
      <button id="btnPlotHistory" class="btn">View History</button>
    </div>

    <div class="preview center" style="margin-top:18px">
      <div class="graph-grid">
        <div class="graph-box" id="boxData">
          <div class="graph-msg" id="msgData">Train or Test scatter will appear here</div>
          <img id="imgData" alt="Dataset scatter" />
        </div>
        <div class="graph-box" id="boxPred">
          <div class="graph-msg" id="msgPred">Correct vs Error will appear here</div>
          <img id="imgPred" alt="Correct vs Error" />
        </div>
        <div class="graph-box" id="boxConf">
          <div class="graph-msg" id="msgConf">Confusion matrix will appear here (needs TEST)</div>
          <img id="imgConf" alt="Confusion matrix" />
        </div>
        <div class="graph-box" id="boxHist">
          <div class="graph-msg" id="msgHist">Training history will appear here</div>
          <img id="imgHistory2" alt="History" />
        </div>
      </div>
    </div>
  </section>

    <section class="card">
      <h2>4. Evaluate</h2>
      <h3>4.1 Manual vector</h3>
      <div class="grid">
        <div class="field">
          <label for="inputVec">x (comma-separated)</label>
          <input id="inputVec" type="text" placeholder="e.g., 0.2, -0.1, 0.5" />
        </div>
      </div>
      <button id="btnEvalOneMLP" class="btn">Evaluate vector</button>
      <div id="oneOutMLP" class="preview"></div>

      <hr />

      <h3>4.2 File of inputs</h3>
      <p>CSV: each line is a vector x with n_in values</p>
      <input id="fileInputsMLP" type="file" accept=".csv" />
      <button id="btnEvalFileMLP" class="btn">Evaluate file</button>
      <div id="manyOutMLP" class="preview table-wrap"></div>
    </section>

  </main>

  <footer class="container footer">
    <small>Victor Pointud</small>
  </footer>

  <script src="../js/ml_perceptron.js"></script>
</body>
</html>